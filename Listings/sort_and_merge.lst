


ARM Macro Assembler    Page 1 


    1 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
    2 00000000         ; San Jose State University
    3 00000000         ; Computer Engineering Department
    4 00000000         ; CMPE 102 - Assembly Programming
    5 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
    6 00000000         ;
    7 00000000         ; Sort_and_Merge.s
    8 00000000         ;
    9 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   10 00000000         
   11 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   12 00000000         ; Vector table
   13 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   14 00000000                 AREA             vectors, CODE, READONLY
   15 00000000                 EXPORT           __Vectors
   16 00000000         __Vectors
   17 00000000 20008000        DCD              0x20008000  ; default stack spa
                                                            ce
   18 00000004 00000000        DCD              Reset_Handler ; reset handler a
                                                            ddr
   19 00000008         
   20 00000008                 AREA             program, CODE, READONLY
   21 00000000                 EXPORT           Reset_Handler
   22 00000000         
   23 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   24 00000000         ; Reset handler
   25 00000000         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   26 00000000 4800    Reset_Handler
                               LDR              R0, =__main ; jump to main prog
                                                            ram
   27 00000002 4780            BLX              R0
   28 00000004         
   29 00000004         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   30 00000004         ; Memory allocation
   31 00000004         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   32 00000004 00000000        AREA             myData, DATA
   33 00000000                 ALIGN
   34 00000000         ; Data allocation 
   35 00000000 FFFFFFCE 
              00000014 
              00000006 
              00000000 
              00000006 
              FFFFFFFE 
              FFFFFFFC 
              00000002 
              0000000A 
              00000014 listA   DCD              -50, 20, 6, 0, 6, -2, -4, 2, 10
, 20 
                                                            ; number list A



ARM Macro Assembler    Page 2 


   36 00000028 0000000F 
              00000019 
              00000001 
              FFFFFFFF 
              00000009 
              00000001 
              0000000B 
              00000009 listB   DCD              15, 25, 1, -1, 9, 1, 11, 9 
                                                            ; number list B
   37 00000048 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 listC   DCD              0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0 
                                                            ; number list C (al
                                                            locate Space)
   38 00000090         
   39 00000090         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   40 00000090         ; Main program
   41 00000090         ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++
                       ++++++++++++++++++++++
   42 00000090                 AREA             myCode, CODE
   43 00000000                 IMPORT           |myData$$Base| ; this has to ma
                                                            tch DATA section na
                                                            me
   44 00000000                 IMPORT           |Load$$ER_RW$$Base|
   45 00000000                 IMPORT           |Load$$ER_RW$$Length|
   46 00000000                 EXPORT           __main
   47 00000000                 ALIGN            4
   48 00000000                 ENTRY
   49 00000000         ; Main routine
   50 00000000         __main  PROC
   51 00000000         ; Initialize allocated data
   52 00000000 4933            LDR              r1, =|myData$$Base| ; load addr
                                                            ess WR area
   53 00000002 4A34            LDR              r2, =|Load$$ER_RW$$Base| ; load
                                                             addr of values
   54 00000004 4B34            LDR              r3, =|Load$$ER_RW$$Length|
   55 00000006         ;Copy Lists A & B into memory
   56 00000006 2B00    start_copy
                               CMP              r3, #0
   57 00000008 D006            BEQ              end_copy
   58 0000000A F852 4B04       LDR              r4, [r2], #4
   59 0000000E F841 4B04       STR              r4, [r1], #4



ARM Macro Assembler    Page 3 


   60 00000012 F1A3 0304       SUB              r3, #4
   61 00000016 E7F6            B                start_copy
   62 00000018 BF00    end_copy
                               NOP
   63 0000001A         
   64 0000001A         ;Sort List A
   65 0000001A 4C30    A_begin LDR              r4, =listA
   66 0000001C 4D30            LDR              r5, =listB
   67 0000001E EBA5 0104       SUB              r1, r5, r4  ; Loop Counter Init
                                                            ialization
   68 00000022 4A2E            LDR              r2, =listA  ; Set Address of En
                                                            try 1
   69 00000024 F102 0304       ADD              r3, r2, #4  ; Address of Entry 
                                                            2
   70 00000028 2904    A_check CMP              r1, #4
   71 0000002A D00D            BEQ              A_done
   72 0000002C 6814            LDR              r4, [r2]    ;Read Entry n
   73 0000002E 681D            LDR              r5, [r3]    ;Read Entry n + 1
   74 00000030 42AC            CMP              r4, r5      ;Compare both numbe
                                                            rs
   75 00000032 DD02            BLE              A_next
   76 00000034         
   77 00000034 601C    A_swap  STR              r4, [r3]    ;
   78 00000036 6015            STR              r5, [r2]    ;
   79 00000038 E7EF            B                A_begin
   80 0000003A F102 0204 
                       A_next  ADD              r2, #4
   81 0000003E F103 0304       ADD              r3, #4
   82 00000042 F1A1 0104       SUB              r1, #4
   83 00000046 E7EF            B                A_check
   84 00000048         
   85 00000048 E7FF    A_done  B                B_begin
   86 0000004A         
   87 0000004A         ;Sort List B
   88 0000004A 4C25    B_begin LDR              r4, =listB
   89 0000004C 4D25            LDR              r5, =listC
   90 0000004E EBA5 0104       SUB              r1, r5, r4  ; Loop Counter Init
                                                            ialization
   91 00000052 4A23            LDR              r2, =listB  ; Set Address of En
                                                            try 1
   92 00000054 F102 0304       ADD              r3, r2, #4  ; Address of Entry 
                                                            2
   93 00000058 2904    B_check CMP              r1, #4
   94 0000005A D00D            BEQ              B_done
   95 0000005C 6814            LDR              r4, [r2]    ;Read Entry n
   96 0000005E 681D            LDR              r5, [r3]    ;Read Entry n + 1
   97 00000060 42AC            CMP              r4, r5      ;Compare both numbe
                                                            rs
   98 00000062 DD02            BLE              B_next
   99 00000064         
  100 00000064 601C    B_swap  STR              r4, [r3]    ;
  101 00000066 6015            STR              r5, [r2]    ;
  102 00000068 E7EF            B                B_begin
  103 0000006A F102 0204 
                       B_next  ADD              r2, #4
  104 0000006E F103 0304       ADD              r3, #4
  105 00000072 F1A1 0104       SUB              r1, #4
  106 00000076 E7EF            B                B_check
  107 00000078         



ARM Macro Assembler    Page 4 


  108 00000078 E7FF    B_done  B                merge_init
  109 0000007A         
  110 0000007A         ; Merge A & B in ascending order
  111 0000007A         merge_init
  112 0000007A 481A            LDR              r0, =listC  ;Index_C
  113 0000007C 4917            LDR              r1, =listA  ;Index_A
  114 0000007E 4A18            LDR              r2, =listB  ;Index_B
  115 00000080 4B17            LDR              r3, =listB  ;A_boundary
  116 00000082 4C18            LDR              r4, =listC  ;B_boundary
  117 00000084 4299    merge_check
                               CMP              r1, r3
  118 00000086 DA18            BGE              fill_B
  119 00000088 42A2            CMP              r2, r4
  120 0000008A DA0E            BGE              fill_A
  121 0000008C 680D            LDR              r5, [r1]    ;Load A[i]
  122 0000008E 6816            LDR              r6, [r2]    ;Load B[i]
  123 00000090 42B5            CMP              r5, r6
  124 00000092 DD00            BLE              ins_A
  125 00000094 E004            B                ins_B
  126 00000096 F840 5B04 
                       ins_A   STR              r5, [r0], #4
  127 0000009A F101 0104       ADD              r1, #4
  128 0000009E E7F1            B                merge_check
  129 000000A0 F840 6B04 
                       ins_B   STR              r6, [r0], #4
  130 000000A4 F102 0204       ADD              r2, #4
  131 000000A8 E7EC            B                merge_check
  132 000000AA 4299    fill_A  CMP              r1, r3
  133 000000AC DA0D            BGE              merge_done
  134 000000AE 680D            LDR              r5, [r1]
  135 000000B0 F840 5B04       STR              r5, [r0], #4
  136 000000B4 F101 0104       ADD              r1, #4
  137 000000B8 E7F7            B                fill_A
  138 000000BA         
  139 000000BA 42A2    fill_B  CMP              r2, r4
  140 000000BC DA05            BGE              merge_done
  141 000000BE 6816            LDR              r6, [r2]
  142 000000C0 F840 6B04       STR              r6, [r0], #4
  143 000000C4 F102 0204       ADD              r2, #4
  144 000000C8 E7F7            B                fill_B
  145 000000CA E7FF    merge_done
                               B                stop
  146 000000CC         stop
  147 000000CC E7FE            B                stop        ; loop here forever
                                                            
  148 000000CE                 ENDP
  149 000000CE                 END
              00 00 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4 --apcs=interw
ork --depend=.\objects\sort_and_merge.d -o.\objects\sort_and_merge.o -I.\RTE\_T
arget_1 -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.1\Device\ARM\ARMCM4\Include -IC:\Ke
il_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERS
ION SETA 524" --predefine="ARMCM4 SETA 1" --list=.\listings\sort_and_merge.lst 
Sort_and_Merge.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

__Vectors 00000000

Symbol: __Vectors
   Definitions
      At line 16 in file Sort_and_Merge.s
   Uses
      At line 15 in file Sort_and_Merge.s
Comment: __Vectors used once
vectors 00000000

Symbol: vectors
   Definitions
      At line 14 in file Sort_and_Merge.s
   Uses
      None
Comment: vectors unused
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Reset_Handler 00000000

Symbol: Reset_Handler
   Definitions
      At line 26 in file Sort_and_Merge.s
   Uses
      At line 18 in file Sort_and_Merge.s
      At line 21 in file Sort_and_Merge.s

program 00000000

Symbol: program
   Definitions
      At line 20 in file Sort_and_Merge.s
   Uses
      None
Comment: program unused
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

listA 00000000

Symbol: listA
   Definitions
      At line 35 in file Sort_and_Merge.s
   Uses
      At line 65 in file Sort_and_Merge.s
      At line 68 in file Sort_and_Merge.s
      At line 113 in file Sort_and_Merge.s

listB 00000028

Symbol: listB
   Definitions
      At line 36 in file Sort_and_Merge.s
   Uses
      At line 66 in file Sort_and_Merge.s
      At line 88 in file Sort_and_Merge.s
      At line 91 in file Sort_and_Merge.s
      At line 114 in file Sort_and_Merge.s
      At line 115 in file Sort_and_Merge.s

listC 00000048

Symbol: listC
   Definitions
      At line 37 in file Sort_and_Merge.s
   Uses
      At line 89 in file Sort_and_Merge.s
      At line 112 in file Sort_and_Merge.s
      At line 116 in file Sort_and_Merge.s

myData 00000000

Symbol: myData
   Definitions
      At line 32 in file Sort_and_Merge.s
   Uses
      None
Comment: myData unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

A_begin 0000001A

Symbol: A_begin
   Definitions
      At line 65 in file Sort_and_Merge.s
   Uses
      At line 79 in file Sort_and_Merge.s
Comment: A_begin used once
A_check 00000028

Symbol: A_check
   Definitions
      At line 70 in file Sort_and_Merge.s
   Uses
      At line 83 in file Sort_and_Merge.s
Comment: A_check used once
A_done 00000048

Symbol: A_done
   Definitions
      At line 85 in file Sort_and_Merge.s
   Uses
      At line 71 in file Sort_and_Merge.s
Comment: A_done used once
A_next 0000003A

Symbol: A_next
   Definitions
      At line 80 in file Sort_and_Merge.s
   Uses
      At line 75 in file Sort_and_Merge.s
Comment: A_next used once
A_swap 00000034

Symbol: A_swap
   Definitions
      At line 77 in file Sort_and_Merge.s
   Uses
      None
Comment: A_swap unused
B_begin 0000004A

Symbol: B_begin
   Definitions
      At line 88 in file Sort_and_Merge.s
   Uses
      At line 85 in file Sort_and_Merge.s
      At line 102 in file Sort_and_Merge.s

B_check 00000058

Symbol: B_check
   Definitions
      At line 93 in file Sort_and_Merge.s
   Uses
      At line 106 in file Sort_and_Merge.s
Comment: B_check used once
B_done 00000078




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: B_done
   Definitions
      At line 108 in file Sort_and_Merge.s
   Uses
      At line 94 in file Sort_and_Merge.s
Comment: B_done used once
B_next 0000006A

Symbol: B_next
   Definitions
      At line 103 in file Sort_and_Merge.s
   Uses
      At line 98 in file Sort_and_Merge.s
Comment: B_next used once
B_swap 00000064

Symbol: B_swap
   Definitions
      At line 100 in file Sort_and_Merge.s
   Uses
      None
Comment: B_swap unused
__main 00000000

Symbol: __main
   Definitions
      At line 50 in file Sort_and_Merge.s
   Uses
      At line 26 in file Sort_and_Merge.s
      At line 46 in file Sort_and_Merge.s

end_copy 00000018

Symbol: end_copy
   Definitions
      At line 62 in file Sort_and_Merge.s
   Uses
      At line 57 in file Sort_and_Merge.s
Comment: end_copy used once
fill_A 000000AA

Symbol: fill_A
   Definitions
      At line 132 in file Sort_and_Merge.s
   Uses
      At line 120 in file Sort_and_Merge.s
      At line 137 in file Sort_and_Merge.s

fill_B 000000BA

Symbol: fill_B
   Definitions
      At line 139 in file Sort_and_Merge.s
   Uses
      At line 118 in file Sort_and_Merge.s
      At line 144 in file Sort_and_Merge.s

ins_A 00000096




ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

Symbol: ins_A
   Definitions
      At line 126 in file Sort_and_Merge.s
   Uses
      At line 124 in file Sort_and_Merge.s
Comment: ins_A used once
ins_B 000000A0

Symbol: ins_B
   Definitions
      At line 129 in file Sort_and_Merge.s
   Uses
      At line 125 in file Sort_and_Merge.s
Comment: ins_B used once
merge_check 00000084

Symbol: merge_check
   Definitions
      At line 117 in file Sort_and_Merge.s
   Uses
      At line 128 in file Sort_and_Merge.s
      At line 131 in file Sort_and_Merge.s

merge_done 000000CA

Symbol: merge_done
   Definitions
      At line 145 in file Sort_and_Merge.s
   Uses
      At line 133 in file Sort_and_Merge.s
      At line 140 in file Sort_and_Merge.s

merge_init 0000007A

Symbol: merge_init
   Definitions
      At line 111 in file Sort_and_Merge.s
   Uses
      At line 108 in file Sort_and_Merge.s
Comment: merge_init used once
myCode 00000000

Symbol: myCode
   Definitions
      At line 42 in file Sort_and_Merge.s
   Uses
      None
Comment: myCode unused
start_copy 00000006

Symbol: start_copy
   Definitions
      At line 56 in file Sort_and_Merge.s
   Uses
      At line 61 in file Sort_and_Merge.s
Comment: start_copy used once
stop 000000CC

Symbol: stop



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 146 in file Sort_and_Merge.s
   Uses
      At line 145 in file Sort_and_Merge.s
      At line 147 in file Sort_and_Merge.s

22 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Load$$ER_RW$$Base 00000000

Symbol: Load$$ER_RW$$Base
   Definitions
      At line 44 in file Sort_and_Merge.s
   Uses
      At line 53 in file Sort_and_Merge.s
Comment: Load$$ER_RW$$Base used once
Load$$ER_RW$$Length 00000000

Symbol: Load$$ER_RW$$Length
   Definitions
      At line 45 in file Sort_and_Merge.s
   Uses
      At line 54 in file Sort_and_Merge.s
Comment: Load$$ER_RW$$Length used once
myData$$Base 00000000

Symbol: myData$$Base
   Definitions
      At line 43 in file Sort_and_Merge.s
   Uses
      At line 52 in file Sort_and_Merge.s
Comment: myData$$Base used once
3 symbols
370 symbols in table
